// Code generated by apigen; DO NOT EDIT.
package {{ .Server.GoPackage }}

import (
	"net/http"

	"github.com/gorilla/mux"

    "{{ .Server.GoModule }}/api"
    "{{ .Server.GoModule }}/auth/user"
)

type Handler struct {
{{ range $group := .Server.Groups -}}
	{{ $group.Name }} {{ $group.Name }}
{{ end }}
}

{{ range $group := .Server.Groups }}
type {{ $group.Name }} interface {
{{ range $route := $group.Routes -}}
	{{ $route.Name }}(ctx api.Context
		{{- if $route.Authenticated}}, user api.User{{end -}}
		{{- with $route.Params}}, params {{.}}{{end -}}
		{{- with $route.Body}}, body {{.}}{{end -}}
			) ({{ $route.Return }}, error)
{{ end }}
}
{{ end }}

func Register(srv *api.Server, h Handler) *mux.Router {
	r := mux.NewRouter()

	{{ range $group := .Server.Groups -}}
		{{ range $route := $group.Routes -}}
		{{ template "handler.go.tmpl" $route }}
		{{ end }}
	{{ end }}

	return r
}
